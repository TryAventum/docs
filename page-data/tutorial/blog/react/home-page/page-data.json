{"componentChunkName":"component---src-templates-doc-js","path":"/tutorial/blog/react/home-page/","result":{"data":{"mdx":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Home Page\",\n  \"date\": \"2020-05-08\",\n  \"order\": 71\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h2\", null, \"What You Will Learn Regarding Aventum?\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"To get all uploads we make a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"GET\"), \" request to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http://localhost:3030/uploads/all\"), \" and to avoid garbing all the uploads you can specify what is the specifications of the uploads that you want by adding a query object to the URL like \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http://localhost:3030/uploads/all?query=${encodeURIComponent( JSON.stringify(query) )}\"), \". You can learn more about this query object \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"../../../../docs/deep-dive/query/\"\n  }), \"here\"), \".\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"To fetch any content page/list from the Aventum server we make a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"GET\"), \" request to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http://localhost:3030/:schemaPluralName?page=:pageNumber\"), \".\"))), mdx(\"hr\", null), mdx(\"p\", null, \"The \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Home\"), \" page will display a paginated list of clickable posts with their featured images, title, created at, updated at, created by, and updated by.\"), mdx(\"p\", null, \"Inside the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"containers\"), \" folder create the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Home\"), \" folder and inside this one create two files \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Home.js\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Home.module.css\"), \".\"), mdx(\"p\", null, \"Inside the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Home.module.css\"), \" file put the following CSS:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-css\",\n    \"metastring\": \"title=src/containers/Home/Home.module.css\",\n    \"title\": \"src/containers/Home/Home.module.css\"\n  }), \"/* Post List\\n     ============================= */\\n.postList {\\n  list-style: none;\\n}\\n\\n.postList img {\\n  max-width: 600px !important;\\n}\\n\\n.postList li {\\n  margin-bottom: 2rem;\\n}\\n\\n/* Pagination\\n     ============================= */\\n.paginationWrapper {\\n  text-align: center;\\n  margin-bottom: 3rem;\\n  margin-top: 3rem;\\n}\\n\\n.paginationWrapper a {\\n  padding: 0.5rem;\\n  border: 2px solid #cecece;\\n  margin-right: 1rem;\\n  text-decoration: none;\\n  color: black;\\n}\\n\\n.active {\\n  text-align: center;\\n  margin-bottom: 3rem;\\n  margin-top: 3rem;\\n  background-color: lightgray;\\n}\\n\")), mdx(\"p\", null, \"At the top of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Home.js\"), \" file import the required modules:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\",\n    \"metastring\": \"title=src/containers/Home/Home.js\",\n    \"title\": \"src/containers/Home/Home.js\"\n  }), \"import React, { useEffect, useState, useCallback } from \\\"react\\\"\\nimport { useLocation, Link } from \\\"react-router-dom\\\"\\nimport classes from \\\"./Home.module.css\\\"\\n\")), mdx(\"p\", null, \"Next create our main \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Home\"), \" function:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\",\n    \"metastring\": \"highlight=5 title=src/containers/Home/Home.js\",\n    \"highlight\": \"5\",\n    \"title\": \"src/containers/Home/Home.js\"\n  }), \"import React, { useEffect, useState, useCallback } from \\\"react\\\"\\nimport { useLocation, Link } from \\\"react-router-dom\\\"\\nimport classes from \\\"./Home.module.css\\\"\\n\\nexport default function Home() {}\\n\")), mdx(\"p\", null, \"We need to manage two states in this component, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"posts\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"featuredImages\"), \", we will store the current page's posts in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"posts\"), \" and the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"featuredImages\"), \" we will store the posts' featured images.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\",\n    \"metastring\": \"highlight=6,7 title=src/containers/Home/Home.js\",\n    \"highlight\": \"6,7\",\n    \"title\": \"src/containers/Home/Home.js\"\n  }), \"import React, { useEffect, useState, useCallback } from \\\"react\\\"\\nimport { useLocation, Link } from \\\"react-router-dom\\\"\\nimport classes from \\\"./Home.module.css\\\"\\n\\nexport default function Home() {\\n  const [posts, setPosts] = useState([])\\n  const [featuredImages, setFeaturedImages] = useState([])\\n}\\n\")), mdx(\"p\", null, \"Now we need to know the current page number:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\",\n    \"metastring\": \"highlight=9,10 title=src/containers/Home/Home.js\",\n    \"highlight\": \"9,10\",\n    \"title\": \"src/containers/Home/Home.js\"\n  }), \"import React, { useEffect, useState, useCallback } from \\\"react\\\"\\nimport { useLocation, Link } from \\\"react-router-dom\\\"\\nimport classes from \\\"./Home.module.css\\\"\\n\\nexport default function Home() {\\n  const [posts, setPosts] = useState([])\\n  const [featuredImages, setFeaturedImages] = useState([])\\n\\n  let queryString = new URLSearchParams(useLocation().search)\\n  const currentPage = Number(queryString.get(\\\"page\\\")) || 1\\n}\\n\")), mdx(\"p\", null, \"Next define the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getUploadsInIds\"), \" function:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\",\n    \"metastring\": \"highlight=12-24 title=src/containers/Home/Home.js\",\n    \"highlight\": \"12-24\",\n    \"title\": \"src/containers/Home/Home.js\"\n  }), \"import React, { useEffect, useState, useCallback } from \\\"react\\\"\\nimport { useLocation, Link } from \\\"react-router-dom\\\"\\nimport classes from \\\"./Home.module.css\\\"\\n\\nexport default function Home() {\\n  const [posts, setPosts] = useState([])\\n  const [featuredImages, setFeaturedImages] = useState([])\\n\\n  let queryString = new URLSearchParams(useLocation().search)\\n  const currentPage = Number(queryString.get(\\\"page\\\")) || 1\\n\\n  //Fetch the features images\\n  async function getUploadsInIds(ids) {\\n    let query = { whereIn: { column: \\\"id\\\", values: ids } }\\n\\n    const response = await fetch(\\n      `http://localhost:3030/uploads/all?query=${encodeURIComponent(\\n        JSON.stringify(query)\\n      )}`\\n    )\\n    let data = await response.json()\\n\\n    setFeaturedImages(data.uploads)\\n  }\\n}\\n\")), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getUploadsInIds\"), \" function will receive the uploads ids and will make a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"GET\"), \" request to the server to grab the uploads objects for these ids because we want the uploads URLs to display the images. It asks the server this specific request using the query object \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"{ whereIn: { column: \\\"id\\\", values: ids } }\"), \" which is mean get the uploads where their ids in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ids\"), \" array. Finally, we store the featured image objects in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"featuredImages\"), \" state using the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"setFeaturedImages\"), \" setter.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Lean more about this query object \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"../../../../docs/deep-dive/query/\"\n  }), \"here\"), \".\")), mdx(\"p\", null, \"Next, create the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getPosts\"), \" function that will be responsible to fetch the posts from the server.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\",\n    \"metastring\": \"highlight=26-33 title=src/containers/Home/Home.js\",\n    \"highlight\": \"26-33\",\n    \"title\": \"src/containers/Home/Home.js\"\n  }), \"import React, { useEffect, useState, useCallback } from \\\"react\\\"\\nimport { useLocation, Link } from \\\"react-router-dom\\\"\\nimport classes from \\\"./Home.module.css\\\"\\n\\nexport default function Home() {\\n  const [posts, setPosts] = useState([])\\n  const [featuredImages, setFeaturedImages] = useState([])\\n\\n  let queryString = new URLSearchParams(useLocation().search)\\n  const currentPage = Number(queryString.get(\\\"page\\\")) || 1\\n\\n  //Fetch the features images\\n  async function getUploadsInIds(ids) {\\n    let query = { whereIn: { column: \\\"id\\\", values: ids } }\\n\\n    const response = await fetch(\\n      `http://localhost:3030/uploads/all?query=${encodeURIComponent(\\n        JSON.stringify(query)\\n      )}`\\n    )\\n    let data = await response.json()\\n\\n    setFeaturedImages(data.uploads)\\n  }\\n\\n  //Fetch the posts\\n  const getPosts = useCallback(async _p => {\\n    const response = await fetch(`http://localhost:3030/posts?page=${_p}`)\\n    let data = await response.json()\\n    const allFeaturedImagesIds = data.contents.map(p => p.featuredImage)\\n    setPosts(data)\\n    getUploadsInIds(allFeaturedImagesIds)\\n  }, [])\\n}\\n\")), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getPosts\"), \" will take the page number(\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"_p\"), \") then it will make a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"GET\"), \" request to the server to get the posts page, then store the posts objects in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"posts\"), \" state using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"setPosts\"), \" setter and call \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getUploadsInIds\"), \" with the featured images ids to get their objects that contain the featured images URLs and some other data.\"), mdx(\"p\", null, \"Next, we will use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useEffect\"), \" React hook to call the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getPosts\"), \" function after mount and on page number change.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\",\n    \"metastring\": \"highlight=35-37 title=src/containers/Home/Home.js\",\n    \"highlight\": \"35-37\",\n    \"title\": \"src/containers/Home/Home.js\"\n  }), \"import React, { useEffect, useState, useCallback } from \\\"react\\\"\\nimport { useLocation, Link } from \\\"react-router-dom\\\"\\nimport classes from \\\"./Home.module.css\\\"\\n\\nexport default function Home() {\\n  const [posts, setPosts] = useState([])\\n  const [featuredImages, setFeaturedImages] = useState([])\\n\\n  let queryString = new URLSearchParams(useLocation().search)\\n  const currentPage = Number(queryString.get(\\\"page\\\")) || 1\\n\\n  //Fetch the features images\\n  async function getUploadsInIds(ids) {\\n    let query = { whereIn: { column: \\\"id\\\", values: ids } }\\n\\n    const response = await fetch(\\n      `http://localhost:3030/uploads/all?query=${encodeURIComponent(\\n        JSON.stringify(query)\\n      )}`\\n    )\\n    let data = await response.json()\\n\\n    setFeaturedImages(data.uploads)\\n  }\\n\\n  //Fetch the posts\\n  const getPosts = useCallback(async _p => {\\n    const response = await fetch(`http://localhost:3030/posts?page=${_p}`)\\n    let data = await response.json()\\n    const allFeaturedImagesIds = data.contents.map(p => p.featuredImage)\\n    setPosts(data)\\n    getUploadsInIds(allFeaturedImagesIds)\\n  }, [])\\n\\n  useEffect(() => {\\n    getPosts(currentPage)\\n  }, [currentPage, getPosts])\\n}\\n\")), mdx(\"p\", null, \"Next, we check if there is a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pagination\"), \" object Aventum server sent to us and if the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"totalPages\"), \" is greater than 1, if so then we build the pagination links that we will display at the bottom of the page.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\",\n    \"metastring\": \"highlight=39-57 title=src/containers/Home/Home.js\",\n    \"highlight\": \"39-57\",\n    \"title\": \"src/containers/Home/Home.js\"\n  }), \"import React, { useEffect, useState, useCallback } from \\\"react\\\"\\nimport { useLocation, Link } from \\\"react-router-dom\\\"\\nimport classes from \\\"./Home.module.css\\\"\\n\\nexport default function Home() {\\n  const [posts, setPosts] = useState([])\\n  const [featuredImages, setFeaturedImages] = useState([])\\n\\n  let queryString = new URLSearchParams(useLocation().search)\\n  const currentPage = Number(queryString.get(\\\"page\\\")) || 1\\n\\n  //Fetch the features images\\n  async function getUploadsInIds(ids) {\\n    let query = { whereIn: { column: \\\"id\\\", values: ids } }\\n\\n    const response = await fetch(\\n      `http://localhost:3030/uploads/all?query=${encodeURIComponent(\\n        JSON.stringify(query)\\n      )}`\\n    )\\n    let data = await response.json()\\n\\n    setFeaturedImages(data.uploads)\\n  }\\n\\n  //Fetch the posts\\n  const getPosts = useCallback(async _p => {\\n    const response = await fetch(`http://localhost:3030/posts?page=${_p}`)\\n    let data = await response.json()\\n    const allFeaturedImagesIds = data.contents.map(p => p.featuredImage)\\n    setPosts(data)\\n    getUploadsInIds(allFeaturedImagesIds)\\n  }, [])\\n\\n  useEffect(() => {\\n    getPosts(currentPage)\\n  }, [currentPage, getPosts])\\n\\n  let paginationLinks = []\\n\\n  if (posts.pagination && posts.pagination.totalPages > 1) {\\n    for (\\n      let pageNumber = 1;\\n      pageNumber <= posts.pagination.totalPages;\\n      pageNumber++\\n    ) {\\n      paginationLinks.push(\\n        <Link\\n          className={pageNumber === currentPage ? classes.active : \\\"\\\"}\\n          key={pageNumber}\\n          to={`/?page=${pageNumber}`}\\n        >\\n          {pageNumber}\\n        </Link>\\n      )\\n    }\\n  }\\n}\\n\")), mdx(\"p\", null, \"Finally, let's render what we get:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\",\n    \"metastring\": \"highlight=59-92 title=src/containers/Home/Home.js\",\n    \"highlight\": \"59-92\",\n    \"title\": \"src/containers/Home/Home.js\"\n  }), \"import React, { useEffect, useState, useCallback } from \\\"react\\\"\\nimport { useLocation, Link } from \\\"react-router-dom\\\"\\nimport classes from \\\"./Home.module.css\\\"\\n\\nexport default function Home() {\\n  const [posts, setPosts] = useState([])\\n  const [featuredImages, setFeaturedImages] = useState([])\\n\\n  let queryString = new URLSearchParams(useLocation().search)\\n  const currentPage = Number(queryString.get(\\\"page\\\")) || 1\\n\\n  //Fetch the features images\\n  async function getUploadsInIds(ids) {\\n    let query = { whereIn: { column: \\\"id\\\", values: ids } }\\n\\n    const response = await fetch(\\n      `http://localhost:3030/uploads/all?query=${encodeURIComponent(\\n        JSON.stringify(query)\\n      )}`\\n    )\\n    let data = await response.json()\\n\\n    setFeaturedImages(data.uploads)\\n  }\\n\\n  //Fetch the posts\\n  const getPosts = useCallback(async _p => {\\n    const response = await fetch(`http://localhost:3030/posts?page=${_p}`)\\n    let data = await response.json()\\n    const allFeaturedImagesIds = data.contents.map(p => p.featuredImage)\\n    setPosts(data)\\n    getUploadsInIds(allFeaturedImagesIds)\\n  }, [])\\n\\n  useEffect(() => {\\n    getPosts(currentPage)\\n  }, [currentPage, getPosts])\\n\\n  let paginationLinks = []\\n\\n  if (posts.pagination && posts.pagination.totalPages > 1) {\\n    for (\\n      let pageNumber = 1;\\n      pageNumber <= posts.pagination.totalPages;\\n      pageNumber++\\n    ) {\\n      paginationLinks.push(\\n        <Link\\n          className={pageNumber === currentPage ? classes.active : \\\"\\\"}\\n          key={pageNumber}\\n          to={`/?page=${pageNumber}`}\\n        >\\n          {pageNumber}\\n        </Link>\\n      )\\n    }\\n  }\\n\\n  return (\\n    <>\\n      <ul className={classes.postList}>\\n        {posts.contents &&\\n          posts.contents.map(p => {\\n            const postFeaturedImage = featuredImages.find(\\n              f => f.id === p.featuredImage\\n            )\\n\\n            return (\\n              <Link key={p.id} to={`/post/${p.id}`}>\\n                <li>\\n                  {postFeaturedImage && (\\n                    <img\\n                      src={postFeaturedImage.path}\\n                      alt={postFeaturedImage.originalName}\\n                    />\\n                  )}\\n                  <h2>{p.title}</h2>\\n                  <div>Created By: {p.createdBy}</div>\\n                  <div>Updated By: {p.updatedBy}</div>\\n                  <div>Created At: {p.createdAt}</div>\\n                  <div>Updated At: {p.updatedAt}</div>\\n                  <div></div>\\n                </li>\\n              </Link>\\n            )\\n          })}\\n      </ul>\\n      {posts.pagination && posts.pagination.totalPages > 1 && (\\n        <div className={classes.paginationWrapper}>{paginationLinks}</div>\\n      )}\\n    </>\\n  )\\n}\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"url":"#what-you-will-learn-regarding-aventum","title":"What You Will Learn Regarding Aventum?"}]},"frontmatter":{"title":"Home Page"}}},"pageContext":{"slug":"/tutorial/blog/react/home-page/","prev":{"fields":{"slug":"/tutorial/blog/react/"},"frontmatter":{"title":"Introduction"}},"next":{"fields":{"slug":"/tutorial/blog/react/single-post-page/"},"frontmatter":{"title":"Single Post Page"}}}},"staticQueryHashes":["681094712"]}